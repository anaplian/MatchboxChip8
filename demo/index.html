<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Matchbox Chip 8 Emulator</title>
  <meta name="description" content="Matchbox Chip 8 Interpreter">
  <meta name="author" content="Jonathan Lloyd">
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <h1>Matchbox Chip 8 Emulator</h1>
  <canvas id="stage" width="640px" height="320px" style="border: 1px solid black;">
  </canvas>
  <div>
    <input type="file" id="input" onchange="romUploaded(this.files)">
  </div>
  <div>
    <a href="#" onclick="startRom('ROMS/BLINKY')">BLINKY</a>
  </div>
  <button onclick="stepInterpreter()">STEP</button>
  <script src="../dist/MatchboxChip8.js"></script>
  <script>
    var drawingContext = document.getElementById("stage").getContext("2d");
    var interpreter = new MatchboxChip8.Interpreter(drawingContext);

    var testProgram = [
      0x00e0,
      0x00ee,
      0x1200
    ];
    interpreter.loadInstructions(testProgram);

    function startRom(rom) {
      interpreter.insertRom(rom);
    }

    function romUploaded(romFiles) {
      var romFile = romFiles[0];
      startRom(romFile);
    }

    function stepInterpreter() {
      interpreter.step();
    }
  </script>
</body>
</html>
